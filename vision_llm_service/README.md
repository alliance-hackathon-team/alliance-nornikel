
# Документация API: Поисковой Эндпоинт

## Обзор

Этот документ описывает, как взаимодействовать с эндпоинтом `/search` API. Эндпоинт обрабатывает поисковые запросы и возвращает список документов, соответствующих поисковому термину, вместе с их метаданными.

---

## Эндпоинт

**URL:** `http://127.0.0.1:8000/search`  
**Метод:** `POST`  
**Content-Type:** `application/json`

---

## Запрос

### Тело запроса
Тело запроса должно быть в формате JSON и содержать следующее поле:

- **`text`**: *(строка)* Текст поискового запроса.

### Пример запроса
```bash
curl -X POST "http://127.0.0.1:8000/search" \
-H "Content-Type: application/json" \
-d '{"text": "технология"}'
```

---

## Ответ

### Формат ответа
Ответ представляет собой JSON-объект, содержащий массив с результатами поиска. Каждый объект включает следующие поля:

- **`doc_id`**: *(целое число)* Уникальный идентификатор документа.
- **`page_num`**: *(целое число)* Номер страницы, на которой был найден запрос.
- **`score`**: *(число)* Релевантность документа.
- **`metadata`**: *(массив объектов)* Метаданные документа, включающие:
  - **`file_path`**: Путь к файлу.
  - **`title`**: Название документа.
  - **`extension`**: Расширение файла.
  - **`size`**: Размер файла в байтах.
  - **`last_modified`**: Время последнего изменения файла.
  - **`last_accessed`**: Время последнего доступа к файлу.
  - **`creation_time`**: Время создания файла.
  - **`mode`**: Права доступа к файлу.
  - **`inode`**: Идентификатор inode.
  - **`device`**: Идентификатор устройства.
  - **`links`**: Количество ссылок на файл.
  - **`uid`**: Идентификатор пользователя.
  - **`gid`**: Идентификатор группы.
- **`base64`**: *(null или строка)* Содержимое файла в Base64 (если доступно).

### Пример ответа
```json
{
  "result": [
    {
      "doc_id": 1,
      "page_num": 1,
      "score": 10.1875,
      "metadata": [
        {
          "file_path": "/Users/stasvinokur/Projects/Python/nornickel_hackathon/vision_llm_service/files/1sentence.pdf",
          "title": "1sentence",
          "extension": ".pdf",
          "size": 10687,
          "last_modified": "2024-12-06 09:35:28",
          "last_accessed": "2024-12-06 09:35:29",
          "creation_time": "2024-12-06 09:35:28",
          "mode": 33188,
          "inode": 63382430,
          "device": 16777229,
          "links": 1,
          "uid": 501,
          "gid": 20
        }
      ],
      "base64": null
    },
    {
      "doc_id": 0,
      "page_num": 1,
      "score": 6.6875,
      "metadata": [
        {
          "file_path": "/Users/stasvinokur/Projects/Python/nornickel_hackathon/vision_llm_service/files/english_1pp.pdf",
          "title": "english_1pp",
          "extension": ".pdf",
          "size": 7945,
          "last_modified": "2024-12-05 22:48:41",
          "last_accessed": "2024-12-05 22:53:19",
          "creation_time": "2024-12-05 22:48:41",
          "mode": 33188,
          "inode": 63275096,
          "device": 16777229,
          "links": 1,
          "uid": 501,
          "gid": 20
        }
      ],
      "base64": null
    }
  ]
}
```
